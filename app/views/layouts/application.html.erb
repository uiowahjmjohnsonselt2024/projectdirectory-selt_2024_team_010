<!DOCTYPE html>
<html>
<head>
  <title>Shards of the Grid</title>
  <%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track' => true %>
  <%= javascript_include_tag 'application', 'data-turbolinks-track' => true %>
  <%= csrf_meta_tags %>
</head>
<body>

<header>
  <div class="header-logo">
    <img src="<%= asset_path('logo.png') %>" alt="Shards of the Grid Logo">
  </div>
  <h1>Shards of the Grid</h1>
  <div class="flash-container">
    <% flash.each do |key, message| %>
      <div class="flash <%= key %>"><%= message %></div>
    <% end %>
  </div>
</header>
<% if @current_user %>
  <div class="nav">
    <%= link_to 'Home', dashboard_path, class: 'nav-button' %>
    <%= link_to 'Servers', servers_path, class: 'nav-button' %>
    <%= link_to 'Shop', shop_path, class: 'nav-button' %>
    <%= link_to 'Game', game_path, class: 'nav-button' %>
    <%= link_to 'Settings', settings_path, class: 'nav-button' %>
    <%= link_to 'Logout', logout_path, method: :delete, class: 'nav-button' %>
  </div>
<% end %>
<main>
  <%= yield %>
</main>

<footer>
  <p>&copy; <%= Time.now.year %></p>
</footer>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        setTimeout(function() {
            const flashMessages = document.querySelectorAll('.flash');
            flashMessages.forEach(function(flash) {
                flash.classList.add('fade-out');
                setTimeout(() => flash.remove(), 500); // Remove element after fade out
            });
        }, 2500); // 5 seconds
    });
</script>

</body>
</html>
